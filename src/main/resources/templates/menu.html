<div class="menuContainer">
  <h2>主選單</h2>

  <div class="menuButtons">

    <button class="menuBalanceButton" onclick="loadBalance()">
      <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRgkFjh2iy5-CtbdxEycLzxo0sBBOcTfQboww&s">
      查詢餘額
    </button>

    <button class="menuTransactionButton" onclick="loadTransaction()">
      <img src="https://media.istockphoto.com/id/1280257930/zh/%E5%90%91%E9%87%8F/%E6%B8%AC%E8%A9%A6%E7%B5%90%E6%9E%9C%E8%A1%8C%E5%9C%96%E7%A4%BA-%E9%86%AB%E5%AD%B8%E6%B8%AC%E8%A9%A6%E6%A6%82%E5%BF%B5-%E9%86%AB%E5%AD%B8%E5%BD%A2%E5%BC%8F%E8%88%87%E9%89%9B%E7%AD%86%E6%A8%99%E8%AA%8C%E5%9C%A8%E7%99%BD%E8%89%B2%E8%83%8C%E6%99%AF-%E5%A0%B1%E5%91%8A%E5%92%8C%E7%AD%86%E5%9C%96%E7%A4%BA%E5%9C%A8%E5%A4%A7%E7%B6%B1%E6%A8%A3%E5%BC%8F%E7%9A%84%E7%A7%BB%E5%8B%95%E6%A6%82%E5%BF%B5%E5%92%8C%E7%B6%B2%E9%A0%81%E8%A8%AD%E8%A8%88%E5%90%91%E9%87%8F%E5%9C%96%E5%BD%A2.jpg?s=612x612&w=0&k=20&c=-GVQCRtP26-I8Zy9whMJKu31vuDnlJE-4HZA3VOah80=">
      交易紀錄
    </button>

    <button class="menuTransferButton" onclick="loadTransfer()">
      <img src="https://img.freepik.com/premium-vector/transfer-online-money-icon-outline-transfer-online-money-vector-icon-web-design-isolated-white-background-color-flat_96318-81315.jpg">
      約定轉帳
    </button>

  </div>

  <div class="logout">
    <button class="logoutButton" type="button" onclick="logout()">
      登出
    </button>
  </div>
</div>

<script>
async function logout() {
  const token = localStorage.getItem('token');

  if (!token) {
    showLogin();
    return;
  }

  try {
    const response = await fetch('/api/logout/', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
        'Authorization': `Token ${token}`  // ← 大寫 Token（你原本寫 token 錯了）
      }
    });

    if (response.ok) {
      localStorage.removeItem('token');
      alert('已登出');
      showLogin();
    } else {
      alert('登出失敗');
    }
  } catch (error) {
    alert('無法連線到伺服器');
  }
}
</script>
